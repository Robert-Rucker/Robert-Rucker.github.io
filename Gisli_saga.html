<!DOCTYPE html>
<html lang= "is-IS">
<head>
	<meta charset="utf-8"/>
	<title>Gisli Sursson's Saga</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" crossorigin=""/>
		<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" crossorigin=""></script>    
		<script src="https://dsps.lib.uiowa.edu/placing/public/leafletSlider-1.0.2/leaflet.SliderControl.min.js"></script>
		<script src="https://dsps.lib.uiowa.edu/placing/public/fuse-1.2.1/fuse.min.js"></script>
		<script src="https://dsps.lib.uiowa.edu/placing/public/leafletFuseSearch-noVersion/leafletfuse.js"></script>
		<link rel="stylesheet" href="https://dsps.lib.uiowa.edu/placing/public/leafletFuseSearch-noVersion/leafletfuse.css" type="text/css"/>
		<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
		<script src="https://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
		<link rel="stylesheet" href="https://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" type="text/css">
		<script src="https://dsps.lib.uiowa.edu/placing/public/jqueryUiTouchPunch-0.2.2/jquery.ui.touch-punch.min.js"></script>	
		<script src="https://robert-rucker.github.io/Gisla_Saga.js"></script>
		<link rel="stylesheet" type="text/css" href="https://dsps.lib.uiowa.edu/placing/css/style.css">
		<link rel="stylesheet" type="text/css" href="https://dsps.lib.uiowa.edu/placing/css/navwrap.css">
		<link rel="stylesheet" href="https://Robert-Rucker.github.io/GS_header.css">

	</style>
</head>
<body>
	<div class="header">
		<div class="inner_header">
			<h1>Gisli Sursson's Saga</h1>
		</div>
		
		<ul class="navigation">
			<a href="https://Robert-Rucker.github.io/Gisli_saga.html"><li>Chapter Information</li></a>
			<a href="https://Robert-Rucker.github.io/Gisli_chapters.html"><li>Timeline</li></a>
			<a href="https://Robert-Rucker.github.io/Gisli_search.html" ><li>Search</li></a>
	</div>
	<div id="map" style="width: 100%; height: 600px"></div>

	<script type="text/javascript">
		var topoLink = '<a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>';
		var topoURL = 'https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png';
		var topoAttrib = '&copy; ' + topoLink;
		
		var opstLink = '<a href="http://openstreetmap.org">OpenStreetMap</a>';
		var opstURL = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
		var opstAttrib = '&copy; ' + topoLink + ' &copy; ' + opstLink;

		var stamenURL = 'https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}';
		var stamenAttrib = 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';

		var topoMap = L.tileLayer(topoURL, {attribution: topoAttrib});
		var opstMap = L.tileLayer(opstURL, {attribution: opstAttrib});
		var stamenMap = L.tileLayer(stamenURL,{
			attribution: stamenAttrib,
			subdomains: 'abcd',
			minZoom: 0,
			maxZoom: 20,
			ext: 'png'
		});

		var map = L.map('map',{
			layers: [stamenMap]
		}).setView([61, -9], 4);

		var baseLayers = {
			"Topo Map": topoMap,
			"Open Street Map": opstMap,
			"Stamen Toner": stamenMap
		};
	  
		 L.control.layers(baseLayers).addTo(map);
		 var onEachFeature = function(feature, layer) {
				if (feature.properties) {
					var prop = feature.properties;
					
					var popup = '<h3>'+prop['name']+'</h3>'+'<br><strong>Chapter/s: </strong>'+prop['chapter']+'<br><strong>Latitude and Longitude: </strong>'+prop['coordinates']+' <br><strong>Location: </strong>'+prop['locationType']+'<br><strong>Chapter Information: </strong>'+prop['chapterInfo'];
					feature.layer = layer;
					layer.bindPopup(popup, {maxWidth: "750"});
				}
			}; 
			var greenMarkers = {
				radius: 10,
				fillColor: "#8dff33",
				color: "#0c820a",
				weight: 1,
				opacity: 0.8,
				fillOpacity: 0.5
			};

			var purpleMarkers = {
				radius: 12,
				fillColor: "#9916f3",
				color: "#7f08d0",
				weight: 1,
				opacity: 1,
				fillOpacity: 0.7
			};

			var firstlayer = L.geoJson(gislaSaga, {
				onEachFeature: onEachFeature,
				pointToLayer: function(feature, latlng) {
					return L.circleMarker(latlng, greenMarkers);
				}
			}).addTo(map);

			var timelineLayer = L.geoJson(gislaSaga, {
				onEachFeature: onEachFeature,
				pointToLayer: function(feature, latlng) {
					return L.circleMarker(latlng, purpleMarkers);
				}
			});

			var sliderControl = L.control.sliderControl({
				position: "bottomright",
				layer: timelineLayer,
				range: true
			});

			map.addControl(sliderControl);
			sliderControl.startSlider();
			
			L.marker([53, -12]).addTo(map)
				.bindPopup("<h3>Welcome to the Gisli Sursson's Saga Map</h3>  The links in here are for you to see how Gisli and the people within the saga moved from place to place.<br><h5>The Green and Purple Nodes:</h5>  The purple nodes highlight the locations where you are within the saga.  The green nodes are the nonhighlighted points of the sagas.  Each point has a brief summary about the location and the chapter associated with it.<br/>"+"<a href=' /Chapter_4_route.png '>Gisli's treck from Norway to Iceland</a><br/>"+"<h5>Author's Note:</h5>"+"If you are interested in the original project on the Viking Sagas Dr. Emily Lethbridge and her team created the Icelandic version of what you see here.  Please take some time to see her project and what made mapping the sagas digitally more possible than before.</br>"+"<a href='http://sagamap.hi.is/is/#'>Icelandic Saga Map Project</a></br>").openPopup();

			// information about the chapters came from "Gisli Sursson's Saga and The Saga of the People of Eyri" from Peguin Classics and the locations for Gisli Sursson's Saga came from http://sagamap.hi.is/is/#
			// This map was made by Robert Rucker using Leaflet tutorials and information from GEOG 817 provided by Dr. Robert Shepard at the University Nebraska - Lincoln for the final project during the Fall semester 2021 of HIST 970
	</script>
</body>
</html>
