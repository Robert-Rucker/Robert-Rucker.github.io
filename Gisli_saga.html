<!DOCTYPE html>
<html lang= "is-IS">
<head>
	<meta charset="utf-8"/>
	<title>Gisli Sursson's Saga</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" crossorigin=""/>
		<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" crossorigin=""></script>    
		<script src="https://dsps.lib.uiowa.edu/placing/public/leafletSlider-1.0.2/leaflet.SliderControl.min.js"></script>
		<script src="https://dsps.lib.uiowa.edu/placing/public/fuse-1.2.1/fuse.min.js"></script>
		<script src="https://dsps.lib.uiowa.edu/placing/public/leafletFuseSearch-noVersion/leafletfuse.js"></script>
		<link rel="stylesheet" href="https://dsps.lib.uiowa.edu/placing/public/leafletFuseSearch-noVersion/leafletfuse.css" type="text/css"/>
		<script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
		<script src="https://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
		<link rel="stylesheet" href="https://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" type="text/css">
		<script src="https://dsps.lib.uiowa.edu/placing/public/jqueryUiTouchPunch-0.2.2/jquery.ui.touch-punch.min.js"></script>	
		<script src="https://robert-rucker.github.io/Gisla_Saga.js"></script>
		<link rel="stylesheet" type="text/css" href="https://dsps.lib.uiowa.edu/placing/css/style.css">
		<link rel="stylesheet" type="text/css" href="https://dsps.lib.uiowa.edu/placing/css/navwrap.css">

	</style>
</head>
<body>
	<div id="map" style="width: 100%; height: 97vh;"></div>

	<script type="text/javascript">
		var topoLink = '<a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>';
		var topoURL = 'https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png';
		var topoAttrib = '&copy; ' + topoLink;
		
		var opstLink = '<a href="http://openstreetmap.org">OpenStreetMap</a>';
		var opstURL = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
		var opstAttrib = '&copy; ' + topoLink + ' &copy; ' + opstLink;

		var stamenURL = 'https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}';
		var stamenAttrib = 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';

		var topoMap = L.tileLayer(topoURL, {attribution: topoAttrib});
		var opstMap = L.tileLayer(opstURL, {attribution: opstAttrib});
		var stamenMap = L.tileLayer(stamenURL,{
			attribution: stamenAttrib,
			subdomains: 'abcd',
			minZoom: 0,
			maxZoom: 20,
			ext: 'png'
		});

		var map = L.map('map',{
			layers: [topoMap]
		}).setView([64.811500, -18.676833], 5);

		var baseLayers = {
			"Topo Map": topoMap,
			"Open Street Map": opstMap,
			"Stamen Toner": stamenMap
		};
	  
		 L.control.layers(baseLayers).addTo(map);
		 var onEachFeature = function(feature, layer) {
				if (feature.properties) {
					var prop = feature.properties;
					
					var popup = '<h3>'+prop['name']+'</h3>'+'<br><strong>Chapter/s: </strong>'+prop['chapter']+'<br><strong>Latitude and Longitude: </strong>'+prop['coordinates']+' <br><strong>Location: </strong>'+prop['locationType']+'<br><strong>Chapter Information: </strong>'+prop['chapterInfo'];
					feature.layer = layer;
					layer.bindPopup(popup, {maxWidth: "1000"});
				}
			}; 
			var greenMarkers = {
				radius: 10,
				fillColor: "#8dff33",
				color: "#0c820a",
				weight: 1,
				opacity: 0.8,
				fillOpacity: 0.5
			};

			var purpleMarkers = {
				radius: 12,
				fillColor: "#9916f3",
				color: "#7f08d0",
				weight: 1,
				opacity: 1,
				fillOpacity: 0.7
			};

			var firstlayer = L.geoJson(gislaSaga, {
				onEachFeature: onEachFeature,
				pointToLayer: function(feature, latlng) {
					return L.circleMarker(latlng, greenMarkers);
				}
			}).addTo(map);

			var timelineLayer = L.geoJson(gislaSaga, {
				onEachFeature: onEachFeature,
				pointToLayer: function(feature, latlng) {
					return L.circleMarker(latlng, purpleMarkers);
				}
			});

			var sliderControl = L.control.sliderControl({
				position: "bottomright",
				layer: timelineLayer,
				range: true
			});

			map.addControl(sliderControl);
			sliderControl.startSlider();
			// information about the chapters came from "Gisli Sursson's Saga and The Saga of the People of Eyri" from Peguin Classics and the locations for the Gisli's Saga came from http://sagamap.hi.is/is/# and further notes were added for an English speaking audience
			// This map was made by Robert Rucker using Leaflet tutorials and information from HIST 970 and was supervised by Dr. Sean Trundle at the University Nebraska - Lincoln for the final project during the Spring semester 2021
	</script>
</body>
</html>
